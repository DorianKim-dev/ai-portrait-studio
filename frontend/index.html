<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI ì‚¬ì§„ê´€</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">AI ì‚¬ì§„ê´€</div>
      <div class="spacer"></div>
      <a class="link" href="../docs/AI-ì‚¬ì§„ê´€-í”„ë¡œì íŠ¸-ê³„íšì„œ.md" target="_blank">Docs</a>
    </header>

    <main class="container">
      <section class="panel left">
        <h1 class="title">ëŒ€ì‹œë³´ë“œ</h1>

        <div class="guide-toggle" onclick="toggleGuide()">
          <span>ğŸ“– ì‚¬ìš©ë²• ë³´ê¸°</span>
          <span class="toggle-icon">â–¼</span>
        </div>
        <div class="guide" id="guideContent" hidden>
          <div class="step"><b>1.</b> ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•˜ê±°ë‚˜ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”.</div>
          <div class="step"><b>2.</b> ì•„ë˜ í…Œë§ˆ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì¦‰ì‹œ ìƒì„±ë©ë‹ˆë‹¤. ì—¬ê¶Œ/ì¦ëª…ì€ ê·œê²©ìœ¼ë¡œ ìƒì„±ë¼ìš”.</div>
          <div class="step"><b>3.</b> ê²°ê³¼ëŠ” ì˜¤ë¥¸ìª½ì— í‘œì‹œë˜ë©° ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆì–´ìš”.</div>
        </div>

        <div class="stack">
          <div class="card">
            <div class="card-head">ì¹´ë©”ë¼</div>
            <div class="camera">
              <video id="camVideo" autoplay playsinline muted></video>
              <canvas id="camCanvas" class="hidden"></canvas>
            </div>
            <div class="row gap8 button-row">
              <button id="openCam" class="button">ì¹´ë©”ë¼ ì—´ê¸°</button>
              <button id="shotCam" class="button" disabled>ì´¬ì˜</button>
              <button id="closeCam" class="button" disabled>ì¢…ë£Œ</button>
              <label class="row gap8" style="margin-left:auto; font-size:12px; color: var(--subtle);">
                <input id="mirrorToggle" type="checkbox" /> ê±°ìš¸ ëª¨ë“œ
              </label>
            </div>
          </div>

          <div class="card">
            <div class="card-head">ì‚¬ì§„ ì—…ë¡œë“œ</div>
            <div id="dropzone" class="dropzone">
              <input id="fileInput" type="file" accept="image/*" hidden />
              <div class="dz-instructions">ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
              <img id="preview" class="preview" alt="preview" />
            </div>
          </div>

          <div class="card">
            <div class="card-head">í…Œë§ˆ</div>
            <div class="chips" id="categoryChips">
              <button class="chip active" data-cat="all">All</button>
              <button class="chip" data-cat="essentials">Essentials</button>
              <button class="chip" data-cat="studio">Studio</button>
              <button class="chip" data-cat="travel">Travel/Activity</button>
              <button class="chip" data-cat="cinematic">Cinematic</button>
              <button class="chip" data-cat="style">Style</button>
              <button class="chip" data-cat="creative">Creative</button>
              <button class="chip" data-cat="space">Space/Time</button>
            </div>
            <div class="row gap8 mt8 gender-row">
              <span class="label">í‘œí˜„</span>
              <div class="seg gender" id="genderSeg">
                <button class="button sm" data-gender="auto">ìë™</button>
                <button class="button sm" data-gender="male">ë‚¨ì„±</button>
                <button class="button sm" data-gender="neutral">ì¤‘ì„±</button>
                <button class="button sm" data-gender="female">ì—¬ì„±</button>
              </div>
            </div>
            <div class="row gap8 mt8 shots-row">
              <span class="label">ë§¤ìˆ˜</span>
              <div class="seg shots" id="shotsSeg">
                <button class="button sm" data-shots="1">1ì¥</button>
                <button class="button sm" data-shots="2">2ì¥</button>
                <button class="button sm" data-shots="3">3ì¥</button>
              </div>
            </div>
            <div class="theme-grid mt8" id="themeButtons">
              <button class="button" data-theme="resume" data-cat="essentials">Resume</button>
              <button class="button" data-theme="passport" data-cat="essentials">Passport</button>
              <button class="button" data-theme="baby_studio" data-cat="essentials">Baby-Studio</button>
              <button class="button" data-theme="memory" data-cat="studio">Memory</button>
              <button class="button" data-theme="model" data-cat="studio">Model</button>
              <button class="button" data-theme="profession" data-cat="studio">Profession</button>
              <button class="button" data-theme="wedding" data-cat="studio">Wedding</button>
              <button class="button" data-theme="traditional" data-cat="studio">Traditional</button>
              <button class="button" data-theme="graduation" data-cat="studio">Graduation</button>
              <button class="button" data-theme="lookbook" data-cat="studio">Lookbook</button>
              <button class="button" data-theme="makeover" data-cat="studio">Makeover</button>
              <button class="button" data-theme="travel" data-cat="travel">Travel</button>
              <button class="button" data-theme="activity" data-cat="travel">Activity</button>
              <button class="button" data-theme="film" data-cat="cinematic">Film</button>
              <button class="button" data-theme="actor" data-cat="cinematic">Actor</button>
              <button class="button" data-theme="aerial_set" data-cat="cinematic">Aerial-Set</button>
              <button class="button" data-theme="retro" data-cat="style">Retro</button>
              <button class="button" data-theme="musician" data-cat="style">Musician</button>
              <button class="button" data-theme="kpop" data-cat="style">K-pop</button>
              <button class="button" data-theme="fantasy_real" data-cat="creative">Fantasy-Real</button>
              <button class="button" data-theme="fantasy_anime" data-cat="creative">Fantasy-Anime</button>
              <button class="button" data-theme="anime" data-cat="creative">Anime</button>
              <button class="button meme" data-theme="meme" data-cat="creative">Meme</button>
              <button class="button" data-theme="cosmos" data-cat="space">Cosmos</button>
              <button class="button" data-theme="timetravel" data-cat="space">TimeTravel</button>
              <button class="button" data-theme="animal" data-cat="space">Animal</button>
              <button class="button" data-theme="lifestage" data-cat="space">Lifestage</button>
            </div>
          </div>

          <div id="error" class="error" role="alert" hidden></div>
        </div>
      </section>

      <section class="panel right">
        <h1 class="title">ê²°ê³¼</h1>
        <div id="result" class="result">
          <div class="placeholder">ìƒì„±ëœ ì´ë¯¸ì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
        </div>
        <div class="row gap8 mt8">
          <button id="downloadBtn" class="button" disabled>ë‹¤ìš´ë¡œë“œ</button>
          <a id="savedLink" class="link" target="_blank" rel="noopener"></a>
        </div>

        <div class="gallery" id="gallery"></div>
      </section>
    </main>

    <div id="spinner" class="spinner" hidden>
      <div class="loader"></div>
    </div>

    <!-- Image Lightbox -->
    <div id="lightbox" class="modal" hidden>
      <div class="modal-backdrop"></div>
      <div class="lightbox-body">
        <img id="lightboxImg" alt="preview" />
      </div>
    </div>

    <script src="components.js"></script>
    <script>
      console.log('Components loaded:', typeof window.UI, typeof window.Camera);
      window.addEventListener('load', function() {
        console.log('Page loaded');
      });

      // Guide toggle function
      function toggleGuide() {
        const guide = document.getElementById('guideContent');
        const toggle = document.querySelector('.guide-toggle');
        
        if (guide.hidden) {
          guide.hidden = false;
          toggle.classList.add('expanded');
        } else {
          guide.hidden = true;
          toggle.classList.remove('expanded');
        }
      }
    </script>
    <script src="app.js"></script>
  </body>
  </html>
